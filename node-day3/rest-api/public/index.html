<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Rest Api</title>
    <style>

    body{
        font-family: 'Times New Roman', Times, serif;
        font-size: 20px;
        
    }

        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
        button {
            padding: 5px 10px;
            margin: 2px;
        }

        #edit{
            background-color: green;
            color: white;
        }

        #delete{
            background-color: rgb(245, 33, 5);
            color: white;
        }

        #addItem{
            background-color: rgb(29, 6, 235);
            color: white;
        }


    </style>
</head>
<body>

    <center><h1>REST API</h1></center>
    <table id="data-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <button onclick="addItem()" id="addItem">Add Item</button>

    <script>
        const apiUrl = '/api/data';

        function loadTable() {
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const tableBody = document.querySelector('#data-table tbody');
                    tableBody.innerHTML = '';
                    data.forEach(item => {
                        const row = `<tr>
                                        <td>${item.id}</td>
                                        <td>${item.name}</td>
                                        <td>
                                            <button onclick="editItem('${item.id}')" id="edit">Edit</button>
                                            <button onclick="deleteItem('${item.id}')" id="delete">Delete</button>
                                        </td>
                                    </tr>`;
                        tableBody.innerHTML += row;
                    });
                });
        }

        function addItem() {
            const id = prompt('Enter ID:');
            const name = prompt('Enter Name:');
            const newItem = { id, name };

            fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(newItem)
            }).then(loadTable);
        }

        function editItem(id) {
            const name = prompt('Enter new name:');
            const updatedItem = { id, name };

            fetch(`${apiUrl}/${id}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(updatedItem)
            }).then(loadTable);
        }

        function deleteItem(id) {
            fetch(`${apiUrl}/${id}`, { method: 'DELETE' }).then(loadTable);
        }

        loadTable();
    </script>
</body>
</html>
